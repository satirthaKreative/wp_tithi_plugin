!function(o){"use strict";o(document).ready(function(){o(document).on("click","#yz-add-custom-widget",function(t){t.preventDefault();var e=o(".yz-custom-widget-name span"),i=o("#yz-custom-widgets-form"),d="yz_custom_widgets[yz_custom_widget_"+yz_nextCustomWidget+"]",a=o.yz_getAddData(i,"yz_widget"),n={value:a.name,form:i,selector:e,type:"text"};if(!o.validate_widgets_data(n))return!1;o("#yz_custom_widgets").prepend('<li class="yz-custom-widget-item" data-widget-name="yz_custom_widget_'+yz_nextCustomWidget+'"><h2 class="yz-custom-widget-name"><i class="yz-custom-widget-icon '+a.icon+'"></i><span>'+a.name+'</span></h2><input type="hidden" name="'+d+'[icon]" value="'+a.icon+'" ><input type="hidden" name="'+d+'[name]" value="'+a.name+'" ><input type="hidden" name="'+d+'[content]" value="'+encodeURIComponent(a.content)+'" ><input type="hidden" name="'+d+'[display_title]" value="'+a.display_title+'" ><input type="hidden" name="'+d+'[display_padding]" value="'+a.display_padding+'" ><a class="yz-edit-item yz-edit-custom-widget"></a><a class="yz-delete-item yz-delete-custom-widget"></a></li>'),o.yz_HideModal(i),yz_nextCustomWidget++}),o(document).on("click",".yz-edit-custom-widget",function(t){var e=o(this).closest(".yz-custom-widget-item"),i=o("#yz-custom-widgets-form");o.yz_EditForm({button_id:"yz-update-custom-widget",form_title:yz.update_widget,form:i,item:e})}),o(document).on("click","#yz-update-custom-widget",function(t){t.preventDefault();var e=".yz-custom-widget-name span",i=o("#yz-custom-widgets-form"),d=o.yz_getItemObject(i),a=o.yz_getNewData(i,"keyToVal"),n={old_title:d.find(e).text(),value:a.name,form:i,selector:o(e),type:"text"};if(!o.validate_widgets_data(n))return!1;o.yz_updateFieldsData(i)}),o.validate_widgets_data=function(t){var e=o.extend({},t);return!o.isDataEmpty(e.form)&&(!o.yz_isAlreadyExist({old_title:e.old_title,selector:e.selector,value:e.value,type:"text"})||(o.ShowPanelMessage({msg:yz.name_exist,type:"error"}),!1))}})}(jQuery);