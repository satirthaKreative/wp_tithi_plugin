!function(l){"use strict";l(document).ready(function(){l(document).on("click","#yz-add-custom-tab",function(t){t.preventDefault();var e=l(".yz-custom-tab-name span"),a=l("#yz-custom-tabs-form"),n="yz_custom_tabs[yz_custom_tab_"+yz_nextTab+"]",i=l.yz_getAddData(a,"yz_tab"),o={value:i.title,form:a,selector:e,type:"text",tab_link:i.link,tab_type:i.type,tab_title:i.title,tab_content:i.content};if(!l.validate_tabs_data(o))return!1;l("#yz_custom_tabs").prepend('<li class="yz-custom-tab-item" data-tab-name="yz_custom_tab_'+yz_nextTab+'"><h2 class="yz-custom-tab-name"><i class="yz-custom-tab-icon '+i.icon+'"></i><span>'+i.title+'</span></h2><input type="hidden" name="'+n+'[link]" value="'+i.link+'" ><input type="hidden" name="'+n+'[type]" value="'+i.type+'" ><input type="hidden" name="'+n+'[title]" value="'+i.title+'" ><input type="hidden" name="'+n+'[content]" value="'+encodeURIComponent(i.content)+'" ><input type="hidden" name="'+n+'[display_sidebar]" value="'+i.display_sidebar+'" ><input type="hidden" name="'+n+'[display_nonloggedin]" value="'+i.display_nonloggedin+'" ><a class="yz-edit-item yz-edit-custom-tab"></a><a class="yz-delete-item yz-delete-custom-tab"></a></li>'),l.yz_HideModal(a),yz_nextTab++}),l(document).on("click",".yz-edit-custom-tab",function(t){var e=l(this).closest(".yz-custom-tab-item"),a=l("#yz-custom-tabs-form");l.yz_EditForm({button_id:"yz-update-custom-tab",form_title:yz.update_tab,form:a,item:e})}),l(document).on("click","#yz-update-custom-tab",function(t){t.preventDefault();var e=".yz-custom-tab-name span",a=l("#yz-custom-tabs-form"),n=l.yz_getItemObject(a),i=l.yz_getNewData(a,"keyToVal"),o={old_title:n.find(e).text(),value:i.title,form:a,selector:l(e),type:"text",tab_link:i.link,tab_type:i.type,tab_title:i.title,tab_content:i.content};if(!l.validate_tabs_data(o))return!1;l.yz_updateFieldsData(a)}),l.validate_tabs_data=function(t){var e=l.extend({},t);if(null==e.tab_title||""==l.trim(e.tab_title))return l.ShowPanelMessage({msg:yz.tab_title_empty,type:"error"}),!1;if(l.yz_isAlreadyExist({old_title:e.old_title,selector:e.selector,value:e.value,type:"text"}))return l.ShowPanelMessage({msg:yz.name_exist,type:"error"}),!1;if("link"==e.tab_type){if(null==e.tab_link||""==l.trim(e.tab_link))return l.ShowPanelMessage({msg:yz.tab_url_empty,type:"error"}),!1}else if("shortcode"==e.tab_type&&(null==e.tab_content||""==l.trim(e.tab_content)))return l.ShowPanelMessage({msg:yz.tab_code_empty,type:"error"}),!1;return!0},l("input[name=yz_tab_type]").live("change",function(){var t=".yz-custom-tabs-shortcode-items",e=".yz-custom-tabs-link-item",a=l(this).closest(".yz-custom-tabs-form");"shortcode"==this.value?a.find(e).fadeToggle(400,function(){a.find(t).fadeToggle(400)}):a.find(t).fadeToggle(400,function(){a.find(e).fadeToggle(400)})})})}(jQuery);