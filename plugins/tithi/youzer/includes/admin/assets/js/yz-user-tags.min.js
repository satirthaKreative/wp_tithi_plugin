!function(r){"use strict";r(document).ready(function(){r(document).on("click","#yz-add-user-tag",function(e){e.preventDefault();var t=r(".yz-user-tag-name span"),a=r("#yz-user-tags-form"),n="yz_user_tags[yz_user_tag_"+yz_nextUTag+"]",s=r.yz_getAddData(a,"yz_user_tag"),i={type:"text",value:s.name,tag_name:s.name,form:a,selector:t};if(!r.validate_user_tags_data(i))return!1;r("#yz_user_tags").prepend('<li class="yz-user-tag-item" data-user-tag-name="yz_user_tag_'+yz_nextUTag+'"><h2 class="yz-user-tag-name"><i class="fa yz-user-tag-icon '+s.icon+'"></i><span>'+s.name+'</span></h2><input type="hidden" name="'+n+'[icon]" value="'+s.icon+'" ><input type="hidden" name="'+n+'[name]" value="'+s.name+'" ><input type="hidden" name="'+n+'[field]" value="'+s.field+'" ><input type="hidden" name="'+n+'[description]" value="'+s.description+'" ><a class="yz-edit-item yz-edit-user-tag"></a><a class="yz-delete-item yz-delete-user-tag"></a></li>'),r.yz_HideModal(a),yz_nextUTag++}),r(document).on("click",".yz-edit-user-tag",function(e){var t=r(this).closest(".yz-user-tag-item"),a=r("#yz-user-tags-form");r.yz_EditForm({button_id:"yz-update-user-tag",form_title:yz.update_user_tag,form:a,item:t})}),r(document).on("click","#yz-update-user-tag",function(e){e.preventDefault();var t=".yz-user-tag-name span",a=r("#yz-user-tags-form"),n=r.yz_getItemObject(a),s=r.yz_getNewData(a,"keyToVal"),i={old_name:n.find(t).text(),value:s.name,form:a,selector:r(t),type:"text",tag_icon:s.icon,tag_name:s.name,tag_field:s.field,tag_description:s.description};if(!r.validate_user_tags_data(i))return!1;r.yz_updateFieldsData(a)}),r.validate_user_tags_data=function(e){var t=r.extend({},e);return null==t.tag_name||""==r.trim(t.tag_name)?(r.ShowPanelMessage({msg:yz.utag_name_empty,type:"error"}),!1):!r.yz_isAlreadyExist({old_title:t.old_name,selector:t.selector,value:t.value,type:"text"})||(r.ShowPanelMessage({msg:yz.name_exist,type:"error"}),!1)}})}(jQuery);